<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./css/style.css" />

    <title>random park spin</title>
  </head>
  <body>
    <div class="container py-5 my-md-5">
      <div class="row align-items-center text-center">
        <div class="col-12">
          <h3 class="mb-4">ランダムパークチャレンジ</h3>
          <hr />
          <div class="row align-items-center text-center">
            <div class="col-6 col-md-3 py-md-5" id="reel1">
              <img class="symbol-img" src="./img/dbd.png" alt="symbol" />
              <p class="symbol-text mt-2 text-center"></p>
            </div>
            <div class="col-6 col-md-3 py-md-5" id="reel2">
              <img class="symbol-img" src="./img/dbd.png" alt="symbol" />
              <p class="symbol-text mt-2"></p>
            </div>
            <div class="col-6 col-md-3 py-md-5" id="reel3">
              <img class="symbol-img" src="./img/dbd.png" alt="symbol" />
              <p class="symbol-text mt-2 text-center"></p>
            </div>
            <div class="col-6 col-md-3 py-md-5" id="reel4">
              <img class="symbol-img" src="./img/dbd.png" alt="symbol" />
              <p class="symbol-text mt-2 text-center"></p>
            </div>
          </div>
        </div>

        <div class="col-12 mb-3">
          <button id="spin-button">スタート＆ストップ</button>
        </div>
      </div>
      <hr />
      <div class="row align-items-center text-center">
        <div class="col-12 my-3">
          <h4>チェックを外すと該当キャラのパークがルーレットから外れます</h4>
        </div>
        <div class="col-12 my-3 mb-3">
          <button id="check-all-button">全てのパークを含める</button>
          <button id="uncheck-all-button">全てのパークを外す</button>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="common"
              id="common"
              checked
            />
            <label class="form-check-label" for="common"> 共通パーク </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="dowa"
              id="dowa"
              checked
            />
            <label class="form-check-label" for="dowa"> ドワイト </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="megu"
              id="megu"
              checked
            />
            <label class="form-check-label" for="megu"> メグ </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="kuro"
              id="kuro"
              checked
            />
            <label class="form-check-label" for="kuro"> クローデット </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="bill"
              id="bill"
              checked
            />
            <label class="form-check-label" for="bill"> ビル </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="jake"
              id="jake"
              checked
            />
            <label class="form-check-label" for="jake"> ジェイク </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="nea"
              id="nea"
              checked
            />
            <label class="form-check-label" for="nea"> ネア </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="ace"
              id="ace"
              checked
            />
            <label class="form-check-label" for="ace"> エース </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="kate"
              id="kate"
              checked
            />
            <label class="form-check-label" for="kate"> ケイト </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="davi"
              id="davi"
              checked
            />
            <label class="form-check-label" for="davi">
              デイビッド・キング
            </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="fen"
              id="fen"
              checked
            />
            <label class="form-check-label" for="fen"> フェンミン </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="jef"
              id="jef"
              checked
            />
            <label class="form-check-label" for="jef"> ジェフ </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="kimura"
              id="kimura"
              checked
            />
            <label class="form-check-label" for="kimura"> 木村結衣 </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="jane"
              id="jane"
              checked
            />
            <label class="form-check-label" for="jane">
              ジェーン・ロメロ
            </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="roll"
              id="roll"
              checked
            />
            <label class="form-check-label" for="roll"> ローリー </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="hady"
              id="hady"
              checked
            />
            <label class="form-check-label" for="hady"> ハディ・カウル </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="ero"
              id="ero"
              checked
            />
            <label class="form-check-label" for="ero"> エロディー </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="rena"
              id="rena"
              checked
            />
            <label class="form-check-label" for="rena"> レナート </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="feri"
              id="feri"
              checked
            />
            <label class="form-check-label" for="feri">
              フェリックス・リクター
            </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="gabu"
              id="gabu"
              checked
            />
            <label class="form-check-label" for="gabu"> ガブリエル </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="zal"
              id="zal"
              checked
            />
            <label class="form-check-label" for="zal"> ザリーナ </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="bit"
              id="bit"
              checked
            />
            <label class="form-check-label" for="bit"> ビットリオ </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="que"
              id="que"
              checked
            />
            <label class="form-check-label" for="que"> クエンティン </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="ash"
              id="ash"
              checked
            />
            <label class="form-check-label" for="ash"> アシュレイ・J </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="adom"
              id="adom"
              checked
            />
            <label class="form-check-label" for="adom"> アダム </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="jona"
              id="jona"
              checked
            />
            <label class="form-check-label" for="jona">
              ジョナ・バスケス
            </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="tap"
              id="tap"
              checked
            />
            <label class="form-check-label" for="tap"> タップ刑事 </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="taly"
              id="taly"
              checked
            />
            <label class="form-check-label" for="taly"> タリータ </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="nico"
              id="nico"
              checked
            />
            <label class="form-check-label" for="nico"> ニコラス </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="asa"
              id="asa"
              checked
            />
            <label class="form-check-label" for="asa"> 浅川陽一 </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="lee"
              id="lee"
              checked
            />
            <label class="form-check-label" for="lee"> リー・ユンジン </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="mika"
              id="mika"
              checked
            />
            <label class="form-check-label" for="mika"> ミカエラ </label>
          </div>
        </div>
        <div class="col-auto p-2 px-3">
          <div class="form-check">
            <input
              class="form-check-input symbol-group"
              type="checkbox"
              value="buy"
              id="buy"
              checked
            />
            <label class="form-check-label" for="buy"> 購入パーク </label>
          </div>
        </div>
      </div>
    </div>

    <script>
      const symbols = [
        { img: "./img/unnamed.webp", text: "おとり", group: "zal" },
        { img: "./img/ofureko.webp", text: "オフレコ", group: "zal" },
        { img: "./img/hitobito.webp", text: "人々のために", group: "zal" },
        { img: "./img/tech.webp", text: "テクニシャン", group: "fen" },
        { img: "./img/sinayaka.webp", text: "しなやか", group: "fen" },
        { img: "./img/kei.webp", text: "警戒", group: "fen" },
        { img: "./img/zuttoissyo.webp", text: "ずっと一緒だ", group: "davi" },
        { img: "./img/dehha.webp", text: "デッハ", group: "davi" },
        { img: "./img/yowane.webp", text: "弱音はナシだ", group: "davi" },
        { img: "./img/suba.webp", text: "素早く静かに", group: "megu" },
        { img: "./img/adorena.webp", text: "アドレナリン", group: "megu" },
        { img: "./img/supuba.webp", text: "全力疾走", group: "megu" },
        { img: "./img/break.webp", text: "ブレイクダウン", group: "jef" },
        { img: "./img/aftercare.webp", text: "アフターケア", group: "jef" },
        { img: "./img/dist.webp", text: "ディストーション", group: "jef" },
        { img: "./img/boiru.webp", text: "ボイルオーバー", group: "kate" },
        { img: "./img/dance.webp", text: "ダンスウィズミー", group: "kate" },
        {
          img: "./img/opo.webp",
          text: "オポチュニティ",
          group: "kate",
        },
        { img: "./img/haga.webp", text: "鋼の意思", group: "jake" },
        { img: "./img/tama.webp", text: "魂の平穏", group: "jake" },
        { img: "./img/sabota.webp", text: "サボタージュ", group: "jake" },
        { img: "./img/sumatyaku.webp", text: "スマ着", group: "nea" },
        { img: "./img/seiz.webp", text: "都会の生存術", group: "nea" },
        { img: "./img/tous.webp", text: "都会の逃走術", group: "nea" },
        { img: "./img/kyokan.webp", text: "共感", group: "kuro" },
        { img: "./img/selfcare.webp", text: "セルフケア", group: "kuro" },
        { img: "./img/bota.webp", text: "植物学の知識", group: "kuro" },
        { img: "./img/leader.webp", text: "リーダー", group: "dowa" },
        { img: "./img/uno.webp", text: "有能の証明", group: "dowa" },
        { img: "./img/kizu.webp", text: "絆", group: "dowa" },
        { img: "./img/oki.webp", text: "置き去りにされた者", group: "bill" },
        { img: "./img/fumetu.webp", text: "不滅", group: "bill" },
        { img: "./img/borrow.webp", text: "ボロタイ", group: "bill" },
        { img: "./img/titi.webp", text: "父の助言", group: "asa" },
        { img: "./img/kyokanteki.webp", text: "共感的繋がり", group: "asa" },
        { img: "./img/rekai.webp", text: "霊界理論", group: "asa" },
        { img: "./img/syusse.webp", text: "出世街道", group: "lee" },
        { img: "./img/daihitto.webp", text: "大ヒット", group: "lee" },
        { img: "./img/bou.webp", text: "自己防衛", group: "lee" },
        { img: "./img/syunen.webp", text: "執念", group: "tap" },
        { img: "./img/keiji.webp", text: "刑事の直感", group: "tap" },
        { img: "./img/harikomi.webp", text: "張り込み", group: "tap" },
        { img: "./img/sate.webp", text: "査定", group: "ero" },
        { img: "./img/aza.webp", text: "欺き", group: "ero" },
        { img: "./img/seiryoku.webp", text: "勢力争い", group: "ero" },
        { img: "./img/shadow.webp", text: "シャドウステップ", group: "mika" },
        { img: "./img/iyasi.webp", text: "癒しの輪", group: "mika" },
        { img: "./img/senrigan.webp", text: "千里眼", group: "mika" },
        { img: "./img/seizonsya.webp", text: "唯一の生存者", group: "roll" },
        { img: "./img/syunenno.webp", text: "執念の対象", group: "roll" },
        { img: "./img/kessi.webp", text: "決死の一撃", group: "roll" },
        { img: "./img/mewo.webp", text: "目を覚ませ", group: "que" },
        { img: "./img/nezu.webp", text: "寝ずの番", group: "que" },
        { img: "./img/cho.webp", text: "調整学", group: "que" },
        { img: "./img/rent.webp", text: "連帯感", group: "jane" },
        { img: "./img/heijyo.webp", text: "平常心", group: "jane" },
        { img: "./img/makko.webp", text: "真っ向勝負", group: "jane" },
        { img: "./img/kegano.webp", text: "怪我の功名", group: "kimura" },
        { img: "./img/kyoukou.webp", text: "強硬手段", group: "kimura" },
        { img: "./img/toppa.webp", text: "突破", group: "kimura" },
        { img: "./img/dakai.webp", text: "打開策", group: "jona" },
        { img: "./img/zese.webp", text: "是正措置", group: "jona" },
        { img: "./img/sisuu.webp", text: "指数関数", group: "jona" },
        { img: "./img/tehuda.webp", text: "手札公開", group: "ace" },
        { img: "./img/kirihuda.webp", text: "最後の切り札", group: "ace" },
        { img: "./img/reiz.webp", text: "掛け金のレイズ", group: "ace" },
        { img: "./img/yodo.webp", text: "陽動", group: "adom" },
        { img: "./img/kai.webp", text: "解放", group: "adom" },
        { img: "./img/doc.webp", text: "独学者", group: "adom" },
        { img: "./img/chino.webp", text: "血の騒ぎ", group: "rena" },
        { img: "./img/sute.webp", text: "共同ステルス", group: "rena" },
        { img: "./img/kage.webp", text: "陰の実力者", group: "rena" },
        { img: "./img/sessa.webp", text: "切磋琢磨", group: "taly" },
        { img: "./img/huta.webp", text: "二人の力", group: "taly" },
        { img: "./img/tobo.webp", text: "逃亡の飛躍", group: "taly" },
        { img: "./img/ichi.webp", text: "位置エネルギー", group: "bit" },
        { img: "./img/kirino.webp", text: "霧の作法", group: "bit" },
        { img: "./img/kaso.webp", text: "加速の策略", group: "bit" },
        { img: "./img/suri.webp", text: "修理担当者", group: "gabu" },
        { img: "./img/jyo.webp", text: "状況適応能力", group: "gabu" },
        { img: "./img/gomi.webp", text: "ゴミ漁りの名人", group: "gabu" },
        { img: "./img/geki.webp", text: "劇作法", group: "nico" },
        { img: "./img/sine.webp", text: "シーンの相手役", group: "nico" },
        { img: "./img/yoso.webp", text: "予想外の展開", group: "nico" },
        { img: "./img/toshi.webp", text: "透視家", group: "feri" },
        { img: "./img/kuni.webp", text: "苦肉の策", group: "feri" },
        { img: "./img/tai.webp", text: "耐久設計", group: "feri" },
        { img: "./img/flip.webp", text: "フリップフロップ", group: "ash" },
        { img: "./img/belt.webp", text: "ベルトを締めろ", group: "ash" },
        { img: "./img/au.webp", text: "英雄の奮起", group: "ash" },
        { img: "./img/inner.webp", text: "インナーフォーカス", group: "hady" },
        { img: "./img/zanzo.webp", text: "残像の顕現", group: "hady" },
        { img: "./img/kajyo.webp", text: "過剰な熱意", group: "hady" },
        { img: "./img/tocho.webp", text: "盗聴", group: "buy" },
        { img: "./img/hansya.webp", text: "反射回復", group: "buy" },
        { img: "./img/kumo.webp", text: "雲隠れ", group: "buy" },
        { img: "./img/mina.webp", text: "みなぎる活力", group: "buy" },
        { img: "./img/ans.webp", text: "安心感", group: "buy" },
        { img: "./img/zen.webp", text: "全集中", group: "buy" },
        {
          img: "./img/counter.webp",
          text: "カウンターフォース",
          group: "common",
        },
        {
          img: "./img/kittoge.webp",
          text: "きっとやり遂げる",
          group: "common",
        },
        { img: "./img/kosodoro.webp", text: "コソ泥の本能", group: "common" },
        { img: "./img/sutagure.webp", text: "スタグレ", group: "common" },
        {
          img: "./img/turuniku.webp",
          text: "ツルツルした肉体",
          group: "common",
        },
        { img: "./img/dejavu.webp", text: "デジャブ", group: "common" },
        { img: "./img/renew.webp", text: "リニューアル", group: "common" },
        { img: "./img/yokan.webp", text: "予感", group: "common" },
        { img: "./img/utinaru.webp", text: "内なる回復", group: "common" },
        { img: "./img/neko.webp", text: "凍てつく背筋", group: "common" },
        { img: "./img/jirai.webp", text: "地雷爆破", group: "common" },
        { img: "./img/tisana.webp", text: "小さな獲物", group: "common" },
        { img: "./img/kibo.webp", text: "希望", group: "common" },
        { img: "./img/kuniku.webp", text: "忍苦の時", group: "common" },
        { img: "./img/sinjin.webp", text: "新人魂", group: "common" },
        { img: "./img/jyokyo.webp", text: "状況認識", group: "common" },
        { img: "./img/yama.webp", text: "病も気から", group: "common" },
        { img: "./img/kan.webp", text: "監視者", group: "common" },
        { img: "./img/nin.webp", text: "自己認識", group: "common" },
        { img: "./img/ketu.webp", text: "血族", group: "common" },
        { img: "./img/sin.webp", text: "親近感", group: "common" },
        { img: "./img/dare.webp", text: "誰も見捨てはしない", group: "common" },
        { img: "./img/kisi.webp", text: "起死回生", group: "common" },
        { img: "./img/miga.webp", text: "身軽", group: "common" },
        { img: "./img/gyakk.webp", text: "逆境魂", group: "common" },
        { img: "./img/yami.webp", text: "闇の感覚", group: "common" },
      ];
      const reels = [
        document.getElementById("reel1"),
        document.getElementById("reel2"),
        document.getElementById("reel3"),
        document.getElementById("reel4"),
      ];

      const spinReel = (reel, availableSymbols) => {
        return new Promise((resolve) => {
          let count = 0;
          const interval = setInterval(() => {
            const symbol =
              availableSymbols[
                Math.floor(Math.random() * availableSymbols.length)
              ];
            reel.querySelector(".symbol-img").src = symbol.img;
            reel.querySelector(".symbol-text").textContent = symbol.text;
            if (count > 20) {
              clearInterval(interval);
              resolve(symbol);
            }
            count++;
          }, 10);
        });
      };

      document
        .getElementById("spin-button")
        .addEventListener("click", async () => {
          document.getElementById("spin-button").disabled = true;

          const checkedGroups = Array.from(
            document.querySelectorAll(".symbol-group:checked")
          ).map((el) => el.value);
          const availableSymbols = symbols.filter((symbol) =>
            checkedGroups.includes(symbol.group)
          );

          const usedSymbols = [];
          for (const reel of reels) {
            const symbolsForReel = availableSymbols.filter(
              (symbol) =>
                !usedSymbols.some((usedSymbol) => usedSymbol.img === symbol.img)
            );
            if (symbolsForReel.length === 0) {
              alert("選択されたグループに対応するシンボルがありません。");
              continue;
            }
            const symbol = await spinReel(reel, symbolsForReel);
            usedSymbols.push(symbol);
          }
          document.getElementById("spin-button").disabled = false;
        });

      document
        .getElementById("check-all-button")
        .addEventListener("click", () => {
          const checkboxes = document.querySelectorAll(".symbol-group");
          checkboxes.forEach((checkbox) => {
            checkbox.checked = true;
          });
        });

      document
        .getElementById("uncheck-all-button")
        .addEventListener("click", () => {
          const checkboxes = document.querySelectorAll(".symbol-group");
          checkboxes.forEach((checkbox) => {
            checkbox.checked = false;
          });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
